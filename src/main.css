body {
    &.boundaries-bottom #weekBoundaries>#boundariesInner {
        /* 下部に表示するオプション */
        position: fixed;
        bottom: 0.1em;
        background-color: var(--ls-main-content-background, var(--lx-gray-02, var(--ls-primary-background-color)));
        z-index: 1;
    }

    &:not(.boundaries-bottom) #weekBoundaries {
        /* 上下スクロール時の変動をなくすために必要 */
        height: 88px;
    }

    &>#root>div>main {
        & article>div[data-id*="show-weekday-and-week-number"] {
            & h2>code {
                /* 設定キーを隠す(表示不要) */
                display: none;
            }

            & div.heading-item {
                /* プラグイン設定の見た目を変える(headingのみ) */
                margin-top: 3em;
                border-top-width: 1px;
                padding-top: 1em;
            }

            & div.desc-item {
                /* プラグイン設定の見た目を変える(各項目) */

                /* 有効トグルに合わせて、その次の項目を隠す */
                &[data-key="booleanMonthlyJournal"]:has(input.form-checkbox:not(:checked))+div.desc-item[data-key="monthlyJournalTemplateName"] {
                    display: none;
                }

                &[data-key="booleanQuarterlyJournal"]:has(input.form-checkbox:not(:checked))+div.desc-item[data-key="quarterlyJournalTemplateName"] {
                    display: none;

                    &+div.desc-item[data-key="quarterlyJournalSetPageTag"] {
                        display: none;
                    }
                }

                &[data-key="booleanYearlyJournal"]:has(input.form-checkbox:not(:checked))+div.desc-item[data-key="yearlyJournalTemplateName"] {
                    display: none;
                }

                &[data-key="booleanWeeklyJournalHeadline"]:has(input.form-checkbox:not(:checked))+div.desc-item[data-key="weeklyJournalHeadlineProperty"] {
                    display: none;
                }

                &[data-key="booleanWeeklyJournalThisWeek"]:has(input.form-checkbox:not(:checked))+div.desc-item[data-key="weeklyEmbed"] {
                    display: none;
                }

                &[data-key="booleanWeeklyJournal"]:has(input.form-checkbox:not(:checked))+div.desc-item[data-key="weeklyJournalTemplateName"] {
                    display: none;

                    &+div.desc-item[data-key="weeklyJournalSetPageTag"] {
                        display: none;

                        &+div.desc-item[data-key="booleanWeeklyJournalHeadline"] {
                            display: none;

                            &+div.desc-item[data-key="weeklyJournalHeadlineProperty"] {
                                display: none;

                                &+div.desc-item[data-key="booleanWeeklyJournalThisWeek"] {
                                    display: none;

                                    &+div.desc-item[data-key="weeklyEmbed"] {
                                        display: none;

                                        &+div.desc-item[data-key="weekNumberOptions"] {
                                            display: none;

                                            &+div.heading-item[data-key="heading011"] {
                                                display: none;

                                                &+div.desc-item[data-key="weekNumberChangeQ"] {
                                                    display: none;

                                                    &+div.desc-item[data-key="weekNumberChangeQS"] {
                                                        display: none;

                                                        &+div.desc-item[data-key="weekNumberChangeSlash"] {
                                                            display: none;

                                                            &+div.desc-item[data-key="weekNumberChangeRevert"] {
                                                                display: none;
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }


                &[data-key="booleanBesideJournalTitle"]:has(input.form-checkbox:not(:checked))+div.desc-item[data-key="longOrShort"] {
                    display: none;

                    &+div.desc-item[data-key="underHolidaysAlert"] {
                        display: none;

                        &+div.desc-item[data-key="booleanWeekNumber"] {
                            display: none;

                            &+div.desc-item[data-key="booleanWeekNumberHideYear"] {
                                display: none;

                                &+div.desc-item[data-key="weekNumberOfTheYearOrMonth"] {
                                    display: none;

                                    &+div.desc-item[data-key="booleanRelativeTime"] {
                                        display: none;

                                        &+div.desc-item[data-key="booleanDayOfWeek"] {
                                            display: none;

                                            &+div.desc-item[data-key="booleanMonthlyJournalLink"] {
                                                display: none;

                                                &+div.desc-item[data-key="booleanSettingsButton"] {
                                                    display: none;

                                                    &+div.desc-item[data-key="booleanPrevNextLink"] {
                                                        display: none;
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }

                &[data-key="booleanBoundariesAll"]:has(input.form-checkbox:not(:checked))+div.desc-item[data-key="booleanBoundaries"] {
                    display: none;

                    &+div.desc-item[data-key="booleanJournalsBoundaries"] {
                        display: none;

                        &+div.desc-item[data-key="booleanBoundariesOnWeeklyJournal"] {
                            display: none;

                                &+div.desc-item[data-key="booleanBoundariesOnMonthlyJournal"] {
                                display: none;

                                &+div.desc-item[data-key="boundariesBottom"] {
                                    display: none;

                                    /* Month / WeekNumber UI controls removed; always show these in Two-line calendar */
                                }
                            }
                        }
                    }
                }

                &[data-key="booleanLeftCalendar"]:has(input.form-checkbox:not(:checked))+div.desc-item[data-key="booleanLcWeekNumber"] {
                    display: none;

                    &+div.desc-item[data-key="booleanLcHolidays"] {
                        display: none;

                        &+div.desc-item[data-key="lcHolidaysAlert"] {
                            display: none;
                        }
                    }
                }
            }
        }

        & #left-sidebar {
            & #left-calendar-container {
                z-index: 1;
                background-color: var(--left-sidebar-bg-color);

                &>details {

                    &>#left-calendar-inner {
                        transform: scale(0.84);
                        margin-left: -1em;

                        &>#left-calendar {
                            margin-left: 0.2em;
                            white-space: nowrap;
                            overflow-x: auto;
                            font-size: 0.86em;

                            &>table {
                                background-color: var(--left-sidebar-bg-color);
                                padding-top: 0.5em;
                                padding-bottom: 0.5em;
                                margin-top: 0.5em;
                                margin-bottom: 0.5em;
                                white-space: nowrap;
                                width: auto; /* allow table to expand to fit content */
                                min-width: 295px; /* keep reasonable minimum */
                                overflow-x: visible;
                                border: 2px solid var(--ls-border-color);
                                box-shadow: 0 0 7px var(--ls-border-color);

                                &>thead>tr>th {
                                    padding: 0.55em;
                                    text-align: center;
                                    font-size: 0.9em;
                                }

                                &>tbody>tr>td {
                                    padding: 0.45em;
                                    text-align: center;
                                    opacity: 0.8;
                                    font-size: 1.12em;
                                    background-color: var(--ls-tertiary-background-color);

                                    &:hover {
                                        opacity: 1;
                                        background-color: var(--ls-secondary-background-color);
                                        box-shadow: 0 0 10px var(--ls-tertiary-background-color);
                                    }
                                }

                                /* Light border and hover effect for left calendar day cells */
                                &>tbody>tr>td.lc-day-cell {
                                    transition: background-color 0.12s ease, box-shadow 0.12s ease;
                                }

                                /* Holiday highlight: style date number when cell has lc-holiday */
                                &>tbody>tr>td.lc-day-cell.lc-holiday {
                                    /* color and underline are applied inline to resolve the chosen CSS variable per-cell */
                                }

                                &>tbody>tr>td.lc-day-cell.lc-holiday .lc-day-number {
                                    font-weight: 700;
                                    text-underline-offset: 3px;
                                }

                                /* Ensure day cells do not wrap and make the date number slightly smaller */
                                &>tbody>tr>td.lc-day-cell {
                                    position: relative;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    gap: 0.4rem;
                                    white-space: nowrap;
                                    overflow: hidden;
                                    text-overflow: clip;
                                    font-size: 0.98em; /* slightly smaller than before */
                                }

                                /* Dot indicator for journal/page existence */
                                &>tbody>tr>td.lc-day-cell>.indicator {
                                    width: 0.56em;
                                    height: 0.56em;
                                    border-radius: 50%;
                                    position: absolute;
                                    right: 6px;
                                    top: 6px;
                                    display: inline-block;
                                    background-color: var(--ls-wb-stroke-color-default, currentColor);
                                    opacity: 0.98;
                                    z-index: 3;
                                    border: 1px solid rgba(255,255,255,0.85);
                                    box-shadow: 0 0 0 2px rgba(0,0,0,0.06);
                                }

                                &>tbody>tr>td.lc-day-cell .lc-day-number {
                                    display: inline-block;
                                    font-size: 0.92em; /* smaller date number */
                                    line-height: 1;
                                    white-space: nowrap;
                                }

                                &>thead>tr>th {
                                    /* ensure weekday headers do not wrap and are slightly smaller */
                                    white-space: nowrap;
                                    font-size: 0.78em;
                                    padding: 0.35em;
                                }
                            }

                            &>a:hover {
                                text-decoration: underline;
                            }

                            &>#testOutput {
                                overflow: scroll;
                            }
                        }
                    }
                }
            }
        }

        &>#app-container>#left-container>#main-container>#main-content-container {
            & div.content>div.blocks-container div.ls-block[data-refs-self*='".thisweek"'] a[data-ref=".thisweek"] {
                display: none;
            }

            & div.page.relative div.relative>#journalNav {
                overflow: visible;
                width: max-content;
                user-select: none;
                white-space: nowrap;
            }

            & div.is-journals {
                & div.ls-page-title {
                    display: flex;
                    flex-wrap: nowrap;
                    align-items: center;

                    & h1.title {
                        margin-top: .8em;
                        width: fit-content;
                    }
                }

                &>div.relative div.ls-page-title span#hierarchyLinks {
                    position: absolute;
                    margin-top: -4em;
                }
            }

            & #journals span#journalTitleDetailsPrevNextLink {
                display: none;
            }

            & div:is(#journals, .is-journals) h1.title :is(a.title, span.title a) {
                color: inherit;
            }

            & #weekBoundaries {

                transition: height 0.3s ease-in-out;

                &>#boundariesInner {
                    display: flex;
                    margin-top: 0.1em;
                    min-width: 30em;
                    width: min-content;
                    margin-left: auto;
                    margin-right: auto;
                    border: 2px solid var(--ls-border-color);
                    box-shadow: 0 0 7px var(--ls-border-color);
                    user-select: none;
                    flex-wrap: wrap;

                    @media (max-width: 1300px) {
                        font-size: .8em;
                        justify-content: unset;
                    }

                    @media (min-width: 1301px) {
                        font-size: 0.87em;
                        justify-content: center;
                    }

                    &:not(:hover) {
                        opacity: .93;
                    }

                    &:has(>div)>span.day:not(.thisWeek)>span {
                        &.dayOfWeek {
                            display: none;
                        }

                        &.dayOfMonth {
                            height: 1.4em;

                        }
                    }

                    &>span {
                        &.daySide {
                            display: flex;
                            align-items: center;
                            padding: .3em;
                            width: 3.1em;
                            cursor: pointer;
                            opacity: .6;
                            justify-content: center;
                            /* &.daySideScroll
                                    &.daySideWeekNumber */
                        }

                        &.day {
                            width: 3.9em;
                            padding: 0.15em;
                            margin-left: 0.25em;
                            border-radius: 0.2em;
                            cursor: pointer;
                            white-space: nowrap;
                            overflow: hidden;

                            &.thisWeek {
                                background-color: var(--ls-tertiary-background-color);

                                &:hover {
                                    background-color: var(--ls-secondary-background-color);
                                }
                            }

                            &:not(.thisWeek) {
                                background-color: var(--ls-quaternary-background-color);

                                &:hover {
                                    background-color: var(--ls-secondary-background-color);
                                }
                            }

                            & span.dayOfMonth {
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                font-size: 1.15em;

                                &>span.indicator {
                                    margin-left: .4em;
                                    font-size: .55em;
                                    opacity: .7;
                                }
                            }
                        }
                    }
                }
            }

            & h1.title+span.showWeekday {
                margin-left: 0.75em;
                opacity: .75;
                font-size: 1.1em;
                width: fit-content;

                &>span {
                    margin-left: .75em;
                }
            }
        }
    }
}

/* Hover effects for calendar day cells (left calendar and two-line calendar) */
.lc-day-cell {
    transition: transform 0.12s ease, box-shadow 0.12s ease, background-color 0.12s ease;
}

.lc-day-cell:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    background-color: var(--ls-secondary-background-color);
    z-index: 6;
}

.lc-day-cell:hover .lc-day-number {
    text-decoration: underline;
    text-underline-offset: 3px;
    font-weight: 700;
}

/* Ensure two-line calendar (fixed table) gets the same hover behavior */
.two-line-calendar-table td.lc-day-cell {
    transition: transform 0.12s ease, box-shadow 0.12s ease, background-color 0.12s ease;
}

.two-line-calendar-table td.lc-day-cell:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    background-color: var(--ls-secondary-background-color);
    z-index: 6;
}

/* Modal for editing user events */
.lc-modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.36);
    display: flex;
    align-items: center;
    justify-content: center;
    /* Ensure the modal overlay is on top of everything in Logseq */
    z-index: 10 !important;
    padding-top: -4vh;
}
.lc-modal {
    background: var(--ls-main-content-background, var(--ls-primary-background-color, #fff));
    color: var(--ls-ui-fg, inherit);
    border: 1px solid var(--ls-border-color);
    box-shadow: 0 8px 30px rgba(0,0,0,0.2);
    padding: 1rem;
    width: min(720px, 92%);
    max-height: 80vh;
    overflow: auto;
    border-radius: 8px;
    /* Put modal content above overlay children if needed */
    z-index: 10 !important;
}

/* When editing inline, hide the calendar table so editor can occupy the space */
#left-calendar.lc-hidden-for-edit > table {
    display: none;
}

.lc-inline-editor {
    background: var(--ls-main-content-background, var(--ls-primary-background-color, #fff));
    border: 1px solid var(--ls-border-color);
    padding: 0.75rem;
    border-radius: 6px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);
}

/* Style textarea in inline editor: border and background tuned to theme */
.lc-inline-editor textarea.lc-inline-textarea {
    width: 100%;
    min-height: 10rem; /* kept similar to inline style */
    margin-bottom: 0.5rem;
    padding: 0.6rem 0.75rem;
    border: 1px solid var(--ls-border-color);
    border-radius: 6px;
    background: var(--ls-main-content-background, var(--ls-primary-background-color, #fff));
    color: var(--ls-ui-fg, inherit);
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

/* Focus ring to improve keyboard visibility */
.lc-inline-editor textarea.lc-inline-textarea:focus {
    outline: 2px solid color-mix(in srgb, var(--ls-primary-background-color, #ffd54f) 40%, transparent);
}

/* Slightly darker overlay in dark themes */
body.theme-dark .lc-modal-overlay,
body.dark .lc-modal-overlay {
    background: rgba(0,0,0,0.6);
}

/* Ensure inputs inside modal adapt to theme */
.lc-modal input,
.lc-modal textarea,
.lc-modal button {
    color: var(--ls-ui-fg, inherit);
    background: var(--ls-main-content-background, var(--ls-primary-background-color, #fff));
    border-color: var(--ls-border-color);
}
